"use strict";var __values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.useTrackedRef=void 0;var react_1=require("react"),TrackedReference=function(){function e(e){this.callbackStack=[],this.lastId=0,this.reference=e}return e.prototype.addListener=function(e){var t=this.lastId++;return this.callbackStack.push({id:t,callback:e}),t},e.prototype.removeListener=function(e){this.callbackStack=this.callbackStack.filter((function(t){return t.id!==e}))},Object.defineProperty(e.prototype,"current",{get:function(){return this.reference},set:function(e){var t,r,n=this;if(e!==this.current){this.reference=e;var c=function(t){t.callback(e,(function(){n.removeListener(t.id)}))};try{for(var a=__values(this.callbackStack),i=a.next();!i.done;i=a.next()){c(i.value)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}},enumerable:!1,configurable:!0}),e}();function useTrackedRef(e){return react_1.useRef(new TrackedReference(e)).current}exports.useTrackedRef=useTrackedRef;